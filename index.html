<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Portfolio Dashboard | Admin Panel</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
      
    />
  <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <!-- Login Screen (Initially shown) -->
    <div id="loginScreen" class="login-container">
      <div class="login-box">
        <div class="login-logo">
          <h1><i class="fas fa-cogs"></i> Portfolio Dashboard</h1>
          <p>Manage your portfolio content</p>
        </div>
        <form id="loginForm" class="login-form">
          <div class="form-group">
            <label for="username">Username</label>
            <input
              type="text"
              id="username"
              class="form-control"
              placeholder="Enter username"
              required
            />
          </div>
          <div class="form-group">
            <label for="password">Password</label>
            <input
              type="password"
              id="password"
              class="form-control"
              placeholder="Enter password"
              required
            />
          </div>
          <button type="submit" class="login-btn">
            <i class="fas fa-sign-in-alt"></i> Sign In
          </button>
        </form>
        <div
          style="
            margin-top: 20px;
            text-align: center;
            color: var(--gray);
            font-size: 0.9rem;
          "
        >
      
        </div>
      </div>
    </div>

    <!-- Dashboard Layout (Initially hidden) -->
    <div id="dashboardLayout" style="display: none">
      <!-- Sidebar -->
      <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
          <div class="sidebar-logo">JK</div>
          <h2>Dashboard</h2>
        </div>
        <div class="sidebar-menu">
          <a href="#" class="menu-item active" data-section="dashboard">
            <i class="fas fa-tachometer-alt"></i> Dashboard
          </a>
          <a href="#" class="menu-item" data-section="portfolio">
            <i class="fas fa-briefcase"></i> Portfolio Items
          </a>
          <a href="#" class="menu-item" data-section="skills">
            <i class="fas fa-code"></i> Skills
          </a>
          <a href="#" class="menu-item" data-section="services">
            <i class="fas fa-concierge-bell"></i> Services
          </a>
          <a href="#" class="menu-item" data-section="messages">
            <i class="fas fa-envelope"></i> Messages
          </a>
          <a href="#" class="menu-item" data-section="settings">
            <i class="fas fa-cog"></i> Settings
          </a>
        </div>
      </div>

      <!-- Main Content -->
      <div class="main-content">
        <!-- Topbar -->
        <div class="topbar">
          <div class="topbar-left">
            <button class="mobile-menu-btn" id="mobileMenuBtn">
              <i class="fas fa-bars"></i>
            </button>
            <h1 id="pageTitle">Dashboard Overview</h1>
          </div>
          <div class="topbar-right">
            <div class="user-info">
              <div class="user-avatar">JK</div>
              <div>
                <div style="font-weight: 600">Joshua Kiptoo</div>
                <div style="font-size: 0.9rem; color: var(--gray)">
                  Administrator
                </div>
              </div>
            </div>
            <button class="logout-btn" id="logoutBtn">
              <i class="fas fa-sign-out-alt"></i> Logout
            </button>
          </div>
        </div>

        <!-- Content Area -->
        <div class="content-area">
          <!-- Dashboard Section -->
          <div id="dashboardSection" class="section-content active">
            <div class="dashboard-cards">
              <div class="card">
                <div class="card-icon blue">
                  <i class="fas fa-briefcase"></i>
                </div>
                <h3>Portfolio Items</h3>
                <div class="card-value" id="portfolioCount">8</div>
                <div class="card-change positive">+2 this month</div>
              </div>
              <div class="card">
                <div class="card-icon purple">
                  <i class="fas fa-code"></i>
                </div>
                <h3>Skills</h3>
                <div class="card-value" id="skillsCount">12</div>
                <div class="card-change positive">+1 this month</div>
              </div>
              <div class="card">
                <div class="card-icon green">
                  <i class="fas fa-concierge-bell"></i>
                </div>
                <h3>Services</h3>
                <div class="card-value" id="servicesCount">4</div>
                <div class="card-change">No change</div>
              </div>
              <div class="card">
                <div class="card-icon red">
                  <i class="fas fa-envelope"></i>
                </div>
                <h3>New Messages</h3>
                <div class="card-value" id="messagesCount">5</div>
                <div class="card-change positive">+3 today</div>
              </div>
            </div>

            <div class="section-title">
              Recent Portfolio Items
              <button class="btn btn-primary" id="addPortfolioBtn">
                <i class="fas fa-plus"></i> Add New Item
              </button>
            </div>

            <div class="table-container">
              <table>
                <thead>
                  <tr>
                    <th>Title</th>
                    <th>Category</th>
                    <th>Status</th>
                    <th>Date Added</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody id="portfolioTable">
                  <!-- Portfolio items will be loaded here -->
                </tbody>
              </table>
            </div>

            <div class="section-title">Recent Messages</div>

            <div class="table-container">
              <table>
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Email</th>
                    <th>Subject</th>
                    <th>Date</th>
                    <th>Status</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody id="messagesTable">
                  <!-- Messages will be loaded here -->
                </tbody>
              </table>
            </div>
          </div>

          <!-- Portfolio Section -->
          <div id="portfolioSection" class="section-content">
            <div class="section-title">
              Portfolio Items
              <button class="btn btn-primary" id="addPortfolioBtn2">
                <i class="fas fa-plus"></i> Add New Item
              </button>
            </div>

            <div class="tab-container">
              <div class="tabs">
                <button class="tab active" data-tab="all">All Projects</button>
                <button class="tab" data-tab="web">Web Design</button>
                <button class="tab" data-tab="development">
                  Web Development
                </button>
                <button class="tab" data-tab="wordpress">WordPress</button>
                <button class="tab" data-tab="software">Software</button>
              </div>

              <div class="tab-content active" id="tab-all">
                <div class="table-container">
                  <table>
                    <thead>
                      <tr>
                        <th>Title</th>
                        <th>Category</th>
                        <th>Status</th>
                        <th>Date Added</th>
                        <th>Actions</th>
                      </tr>
                    </thead>
                    <tbody id="portfolioTableAll">
                      <!-- Portfolio items will be loaded here -->
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>

          <!-- Skills Section -->
          <div id="skillsSection" class="section-content">
            <div class="section-title">
              Skills Management
              <button class="btn btn-primary" id="addSkillBtn">
                <i class="fas fa-plus"></i> Add New Skill
              </button>
            </div>

            <div class="table-container">
              <table>
                <thead>
                  <tr>
                    <th>Skill Name</th>
                    <th>Category</th>
                    <th>Proficiency (%)</th>
                    <th>Icon</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody id="skillsTable">
                  <!-- Skills will be loaded here -->
                </tbody>
              </table>
            </div>
          </div>

          <!-- Services Section -->
          <div id="servicesSection" class="section-content">
            <div class="section-title">
              Services Management
              <button class="btn btn-primary" id="addServiceBtn">
                <i class="fas fa-plus"></i> Add New Service
              </button>
            </div>

            <div class="table-container">
              <table>
                <thead>
                  <tr>
                    <th>Service Title</th>
                    <th>Description</th>
                    <th>Icon</th>
                    <th>Features</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody id="servicesTable">
                  <!-- Services will be loaded here -->
                </tbody>
              </table>
            </div>
          </div>

          <!-- Messages Section -->
          <div id="messagesSection" class="section-content">
            <div class="section-title">Contact Messages</div>

            <div class="table-container">
              <table>
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Email</th>
                    <th>Subject</th>
                    <th>Message</th>
                    <th>Date</th>
                    <th>Status</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody id="messagesTableFull">
                  <!-- Messages will be loaded here -->
                </tbody>
              </table>
            </div>
          </div>

          <!-- Settings Section -->
          <div id="settingsSection" class="section-content">
            <div class="section-title">Portfolio Settings</div>

            <div class="card" style="margin-bottom: 30px">
              <h3>Personal Information</h3>
              <form id="personalInfoForm">
                <div class="form-row">
                  <div class="form-group">
                    <label for="settingName">Full Name</label>
                    <input
                      type="text"
                      id="settingName"
                      class="form-control"
                      value="Joshua Kiptoo"
                    />
                  </div>
                  <div class="form-group">
                    <label for="settingEmail">Email</label>
                    <input
                      type="email"
                      id="settingEmail"
                      class="form-control"
                      value="joshtoo857@gmail.com"
                    />
                  </div>
                </div>
                <div class="form-row">
                  <div class="form-group">
                    <label for="settingPhone">Phone</label>
                    <input
                      type="text"
                      id="settingPhone"
                      class="form-control"
                      value="+254715682333"
                    />
                  </div>
                  <div class="form-group">
                    <label for="settingLocation">Location</label>
                    <input
                      type="text"
                      id="settingLocation"
                      class="form-control"
                      value="Eldoret, Kenya"
                    />
                  </div>
                </div>
                <div class="form-footer">
                  <button type="submit" class="btn btn-success">
                    <i class="fas fa-save"></i> Save Changes
                  </button>
                </div>
              </form>
            </div>

            <div class="card">
              <h3>Dashboard Preferences</h3>
              <div class="form-group">
                <label
                  style="
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                  "
                >
                  <span>Enable Notifications</span>
                  <label class="toggle-switch">
                    <input type="checkbox" id="notificationsToggle" checked />
                    <span class="toggle-slider"></span>
                  </label>
                </label>
              </div>
              <div class="form-group">
                <label
                  style="
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                  "
                >
                  <span>Dark Mode</span>
                  <label class="toggle-switch">
                    <input type="checkbox" id="darkModeToggle" />
                    <span class="toggle-slider"></span>
                  </label>
                </label>
              </div>
              <div class="form-footer">
                <button class="btn btn-success">
                  <i class="fas fa-save"></i> Save Preferences
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Add Portfolio Modal -->
    <div id="portfolioModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h3 id="modalPortfolioTitle">Add New Portfolio Item</h3>
          <button class="close-modal" id="closePortfolioModal">&times;</button>
        </div>
        <div class="modal-body">
          <form id="portfolioForm">
            <input type="hidden" id="portfolioId" />
            <div class="form-group">
              <label for="portfolioTitle">Project Title</label>
              <input
                type="text"
                id="portfolioTitle"
                class="form-control"
                required
              />
            </div>
            <div class="form-group">
              <label for="portfolioCategory">Category</label>
              <select id="portfolioCategory" class="form-control" required>
                <option value="web">Web Design</option>
                <option value="development">Web Development</option>
                <option value="wordpress">WordPress</option>
                <option value="software">Software</option>
              </select>
            </div>
            <div class="form-group">
              <label for="portfolioDescription">Project Description</label>
              <textarea
                id="portfolioDescription"
                class="form-control"
                rows="4"
                required
              ></textarea>
            </div>
            <div class="form-group">
              <label for="portfolioImage">Image URL</label>
              <input
                type="text"
                id="portfolioImage"
                class="form-control"
                placeholder="https://example.com/image.jpg"
              />
            </div>
            <div class="form-group">
              <label for="portfolioLink">Project Link</label>
              <input
                type="url"
                id="portfolioLink"
                class="form-control"
                placeholder="https://example.com"
              />
            </div>
            <div class="form-group">
              <label
                style="
                  display: flex;
                  justify-content: space-between;
                  align-items: center;
                "
              >
                <span>Published</span>
                <label class="toggle-switch">
                  <input type="checkbox" id="portfolioPublished" checked />
                  <span class="toggle-slider"></span>
                </label>
              </label>
            </div>
            <div class="form-footer">
              <button
                type="button"
                class="btn btn-outline"
                id="cancelPortfolioBtn"
              >
                Cancel
              </button>
              <button type="submit" class="btn btn-primary">
                <i class="fas fa-save"></i> Save Portfolio Item
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!-- Add Skill Modal -->
    <div id="skillModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h3 id="modalSkillTitle">Add New Skill</h3>
          <button class="close-modal" id="closeSkillModal">&times;</button>
        </div>
        <div class="modal-body">
          <form id="skillForm">
            <input type="hidden" id="skillId" />
            <div class="form-group">
              <label for="skillName">Skill Name</label>
              <input type="text" id="skillName" class="form-control" required />
            </div>
            <div class="form-group">
              <label for="skillCategory">Category</label>
              <select id="skillCategory" class="form-control" required>
                <option value="frontend">Frontend Development</option>
                <option value="backend">Backend & CMS</option>
                <option value="tools">Tools & Technologies</option>
              </select>
            </div>
            <div class="form-group">
              <label for="skillProficiency">Proficiency (%)</label>
              <input
                type="range"
                id="skillProficiency"
                class="form-control"
                min="0"
                max="100"
                value="80"
              />
              <div
                style="
                  display: flex;
                  justify-content: space-between;
                  margin-top: 5px;
                "
              >
                <span>0%</span>
                <span id="proficiencyValue">80%</span>
                <span>100%</span>
              </div>
            </div>
            <div class="form-group">
              <label for="skillIcon">Icon Class (FontAwesome)</label>
              <input
                type="text"
                id="skillIcon"
                class="form-control"
                value="fas fa-code"
                required
              />
              <small>Example: fab fa-html5, fas fa-code, fab fa-js</small>
            </div>
            <div class="form-footer">
              <button type="button" class="btn btn-outline" id="cancelSkillBtn">
                Cancel
              </button>
              <button type="submit" class="btn btn-primary">
                <i class="fas fa-save"></i> Save Skill
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!-- Add Service Modal -->
    <div id="serviceModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h3 id="modalServiceTitle">Add New Service</h3>
          <button class="close-modal" id="closeServiceModal">&times;</button>
        </div>
        <div class="modal-body">
          <form id="serviceForm">
            <input type="hidden" id="serviceId" />
            <div class="form-group">
              <label for="serviceTitle">Service Title</label>
              <input
                type="text"
                id="serviceTitle"
                class="form-control"
                required
              />
            </div>
            <div class="form-group">
              <label for="serviceDescription">Description</label>
              <textarea
                id="serviceDescription"
                class="form-control"
                rows="3"
                required
              ></textarea>
            </div>
            <div class="form-group">
              <label for="serviceIcon">Icon Class (FontAwesome)</label>
              <input
                type="text"
                id="serviceIcon"
                class="form-control"
                value="fas fa-code"
                required
              />
              <small
                >Example: fas fa-paint-brush, fas fa-code, fab
                fa-wordpress</small
              >
            </div>
            <div class="form-group">
              <label for="serviceFeatures">Features (comma separated)</label>
              <textarea
                id="serviceFeatures"
                class="form-control"
                rows="3"
                placeholder="UI/UX Design, Responsive Layouts, Prototyping, Brand Integration"
              ></textarea>
            </div>
            <div class="form-footer">
              <button
                type="button"
                class="btn btn-outline"
                id="cancelServiceBtn"
              >
                Cancel
              </button>
              <button type="submit" class="btn btn-primary">
                <i class="fas fa-save"></i> Save Service
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <script>
      // Sample data
      const sampleData = {
        portfolio: [
          {
            id: 1,
            title: "E-commerce Website",
            category: "development",
            description:
              "A fully functional online store with payment integration",
            image: "",
            link: "https://example.com",
            published: true,
            date: "2023-10-15",
          },
          {
            id: 2,
            title: "Corporate WordPress Site",
            category: "wordpress",
            description: "Custom WordPress theme for a corporate client",
            image: "",
            link: "https://example.com",
            published: true,
            date: "2023-10-10",
          },
          {
            id: 3,
            title: "Mobile App UI Design",
            category: "web",
            description:
              "User interface design for a fitness mobile application",
            image: "",
            link: "",
            published: true,
            date: "2023-10-05",
          },
          {
            id: 4,
            title: "Inventory Management System",
            category: "software",
            description:
              "Desktop software for inventory tracking and management",
            image: "",
            link: "",
            published: false,
            date: "2023-09-28",
          },
          {
            id: 5,
            title: "Portfolio Website",
            category: "development",
            description: "Responsive portfolio website with dark/light mode",
            image: "",
            link: "https://example.com",
            published: true,
            date: "2023-09-20",
          },
          {
            id: 6,
            title: "Real Estate WordPress Theme",
            category: "wordpress",
            description: "Custom WordPress theme for real estate listings",
            image: "",
            link: "https://example.com",
            published: true,
            date: "2023-09-15",
          },
          {
            id: 7,
            title: "Dashboard UI Kit",
            category: "web",
            description: "Complete UI kit for admin dashboards",
            image: "",
            link: "",
            published: true,
            date: "2023-09-10",
          },
          {
            id: 8,
            title: "CRM Software",
            category: "software",
            description: "Customer relationship management software",
            image: "",
            link: "",
            published: false,
            date: "2023-09-05",
          },
        ],
        skills: [
          {
            id: 1,
            name: "HTML5",
            category: "frontend",
            proficiency: 95,
            icon: "fab fa-html5",
          },
          {
            id: 2,
            name: "CSS3",
            category: "frontend",
            proficiency: 90,
            icon: "fab fa-css3-alt",
          },
          {
            id: 3,
            name: "JavaScript",
            category: "frontend",
            proficiency: 88,
            icon: "fab fa-js",
          },
          {
            id: 4,
            name: "React",
            category: "frontend",
            proficiency: 85,
            icon: "fab fa-react",
          },
          {
            id: 5,
            name: "PHP",
            category: "backend",
            proficiency: 92,
            icon: "fab fa-php",
          },
          {
            id: 6,
            name: "MySQL",
            category: "backend",
            proficiency: 90,
            icon: "fas fa-database",
          },
          {
            id: 7,
            name: "WordPress",
            category: "backend",
            proficiency: 95,
            icon: "fab fa-wordpress",
          },
          {
            id: 8,
            name: "Laravel",
            category: "backend",
            proficiency: 80,
            icon: "fab fa-laravel",
          },
          {
            id: 9,
            name: "Python",
            category: "tools",
            proficiency: 75,
            icon: "fab fa-python",
          },
          {
            id: 10,
            name: "Git",
            category: "tools",
            proficiency: 88,
            icon: "fab fa-git-alt",
          },
          {
            id: 11,
            name: "Figma",
            category: "tools",
            proficiency: 82,
            icon: "fab fa-figma",
          },
          {
            id: 12,
            name: "Node.js",
            category: "backend",
            proficiency: 78,
            icon: "fab fa-node-js",
          },
        ],
        services: [
          {
            id: 1,
            title: "Web Design",
            description:
              "Creating visually appealing, user-friendly website designs",
            icon: "fas fa-paint-brush",
            features: [
              "UI/UX Design",
              "Responsive Layouts",
              "Prototyping",
              "Brand Integration",
            ],
          },
          {
            id: 2,
            title: "Web Development",
            description:
              "Building robust, scalable websites and web applications",
            icon: "fas fa-code",
            features: [
              "Frontend Development",
              "Backend Development",
              "E-commerce Solutions",
              "API Integration",
            ],
          },
          {
            id: 3,
            title: "Software Development",
            description:
              "Developing custom software solutions for your business",
            icon: "fas fa-laptop-code",
            features: [
              "Custom Applications",
              "Desktop Software",
              "System Architecture",
              "Database Design",
            ],
          },
          {
            id: 4,
            title: "WordPress Development",
            description: "Creating custom WordPress themes and plugins",
            icon: "fab fa-wordpress",
            features: [
              "Custom Themes",
              "Plugin Development",
              "WooCommerce",
              "WordPress Optimization",
            ],
          },
        ],
        messages: [
          {
            id: 1,
            name: "John Smith",
            email: "john@example.com",
            subject: "Website Redesign",
            message: "I need a quote for redesigning my company website...",
            date: "2023-10-20",
            read: false,
          },
          {
            id: 2,
            name: "Sarah Johnson",
            email: "sarah@example.com",
            subject: "WordPress Support",
            message: "Looking for ongoing WordPress maintenance...",
            date: "2023-10-19",
            read: true,
          },
          {
            id: 3,
            name: "Michael Brown",
            email: "michael@example.com",
            subject: "Custom Software",
            message: "Need a custom CRM solution for my business...",
            date: "2023-10-18",
            read: false,
          },
          {
            id: 4,
            name: "Emily Davis",
            email: "emily@example.com",
            subject: "E-commerce Project",
            message: "Interested in building an online store...",
            date: "2023-10-17",
            read: true,
          },
          {
            id: 5,
            name: "David Wilson",
            email: "david@example.com",
            subject: "Mobile App Design",
            message: "Looking for a designer for my mobile app...",
            date: "2023-10-16",
            read: false,
          },
        ],
      };

      // State management
      let currentData = JSON.parse(JSON.stringify(sampleData));
      let editingItem = null;

      // DOM Elements
      const loginScreen = document.getElementById("loginScreen");
      const dashboardLayout = document.getElementById("dashboardLayout");
      const loginForm = document.getElementById("loginForm");
      const logoutBtn = document.getElementById("logoutBtn");
      const mobileMenuBtn = document.getElementById("mobileMenuBtn");
      const sidebar = document.getElementById("sidebar");
      const menuItems = document.querySelectorAll(".menu-item");
      const sectionContents = document.querySelectorAll(".section-content");
      const pageTitle = document.getElementById("pageTitle");

      // Modal elements
      const portfolioModal = document.getElementById("portfolioModal");
      const skillModal = document.getElementById("skillModal");
      const serviceModal = document.getElementById("serviceModal");
      const addPortfolioBtns = document.querySelectorAll(
        '[id^="addPortfolioBtn"]',
      );
      const addSkillBtn = document.getElementById("addSkillBtn");
      const addServiceBtn = document.getElementById("addServiceBtn");

      // Initialize the dashboard
      document.addEventListener("DOMContentLoaded", function () {
        // Check if user is already logged in
        if (localStorage.getItem("portfolioLoggedIn") === "true") {
          showDashboard();
        }

        // Load initial data
        loadPortfolioTable();
        loadSkillsTable();
        loadServicesTable();
        loadMessagesTable();
        updateDashboardCounts();

        // Event Listeners
        // Login
        loginForm.addEventListener("submit", function (e) {
          e.preventDefault();
          const username = document.getElementById("username").value;
          const password = document.getElementById("password").value;

          // Simple authentication (in a real app, this would be server-side)
          if (username === "admin" && password === "password123") {
            localStorage.setItem("portfolioLoggedIn", "true");
            showDashboard();
          } else {
            alert("Invalid credentials. Try admin / password123");
          }
        });

        // Logout
        logoutBtn.addEventListener("click", function () {
          localStorage.removeItem("portfolioLoggedIn");
          showLogin();
        });

        // Mobile menu toggle
        mobileMenuBtn.addEventListener("click", function () {
          sidebar.classList.toggle("active");
        });

        // Sidebar menu navigation
        menuItems.forEach((item) => {
          item.addEventListener("click", function (e) {
            e.preventDefault();

            // Update active menu item
            menuItems.forEach((i) => i.classList.remove("active"));
            this.classList.add("active");

            // Show corresponding section
            const section = this.getAttribute("data-section");
            showSection(section);

            // Close mobile menu on selection
            if (window.innerWidth <= 992) {
              sidebar.classList.remove("active");
            }
          });
        });

        // Portfolio modal
        addPortfolioBtns.forEach((btn) => {
          btn.addEventListener("click", function () {
            openPortfolioModal();
          });
        });

        document
          .getElementById("closePortfolioModal")
          .addEventListener("click", closePortfolioModal);
        document
          .getElementById("cancelPortfolioBtn")
          .addEventListener("click", closePortfolioModal);

        // Skill modal
        addSkillBtn.addEventListener("click", function () {
          openSkillModal();
        });

        document
          .getElementById("closeSkillModal")
          .addEventListener("click", closeSkillModal);
        document
          .getElementById("cancelSkillBtn")
          .addEventListener("click", closeSkillModal);

        // Service modal
        addServiceBtn.addEventListener("click", function () {
          openServiceModal();
        });

        document
          .getElementById("closeServiceModal")
          .addEventListener("click", closeServiceModal);
        document
          .getElementById("cancelServiceBtn")
          .addEventListener("click", closeServiceModal);

        // Close modals when clicking outside
        window.addEventListener("click", function (e) {
          if (e.target === portfolioModal) closePortfolioModal();
          if (e.target === skillModal) closeSkillModal();
          if (e.target === serviceModal) closeServiceModal();
        });

        // Portfolio form submission
        document
          .getElementById("portfolioForm")
          .addEventListener("submit", function (e) {
            e.preventDefault();
            savePortfolioItem();
          });

        // Skill form submission
        document
          .getElementById("skillForm")
          .addEventListener("submit", function (e) {
            e.preventDefault();
            saveSkill();
          });

        // Service form submission
        document
          .getElementById("serviceForm")
          .addEventListener("submit", function (e) {
            e.preventDefault();
            saveService();
          });

        // Skill proficiency slider
        const proficiencySlider = document.getElementById("skillProficiency");
        const proficiencyValue = document.getElementById("proficiencyValue");

        proficiencySlider.addEventListener("input", function () {
          proficiencyValue.textContent = this.value + "%";
        });

        // Tab functionality
        document.querySelectorAll(".tab").forEach((tab) => {
          tab.addEventListener("click", function () {
            const tabId = this.getAttribute("data-tab");

            // Update active tab
            document
              .querySelectorAll(".tab")
              .forEach((t) => t.classList.remove("active"));
            this.classList.add("active");

            // Show corresponding content
            document.querySelectorAll(".tab-content").forEach((content) => {
              content.classList.remove("active");
            });

            document.getElementById(`tab-${tabId}`).classList.add("active");

            // Filter portfolio items
            filterPortfolioTable(tabId);
          });
        });

        // Settings form
        document
          .getElementById("personalInfoForm")
          .addEventListener("submit", function (e) {
            e.preventDefault();
            alert("Personal information updated successfully!");
          });
      });

      // Functions
      function showDashboard() {
        loginScreen.style.display = "none";
        dashboardLayout.style.display = "flex";
      }

      function showLogin() {
        loginScreen.style.display = "flex";
        dashboardLayout.style.display = "none";
        loginForm.reset();
      }

      function showSection(section) {
        // Hide all sections
        sectionContents.forEach((content) => {
          content.classList.remove("active");
        });

        // Show selected section
        document.getElementById(`${section}Section`).classList.add("active");

        // Update page title
        const titles = {
          dashboard: "Dashboard Overview",
          portfolio: "Portfolio Items",
          skills: "Skills Management",
          services: "Services Management",
          messages: "Contact Messages",
          settings: "Portfolio Settings",
        };

        pageTitle.textContent = titles[section];
      }

      function loadPortfolioTable() {
        const tableBody = document.getElementById("portfolioTable");
        const tableBodyAll = document.getElementById("portfolioTableAll");
        tableBody.innerHTML = "";
        tableBodyAll.innerHTML = "";

        // Sort by date (newest first)
        const sortedPortfolio = [...currentData.portfolio].sort(
          (a, b) => new Date(b.date) - new Date(a.date),
        );

        // Get first 5 items for dashboard
        const dashboardItems = sortedPortfolio.slice(0, 5);

        // Dashboard table
        dashboardItems.forEach((item) => {
          const row = createPortfolioTableRow(item);
          tableBody.appendChild(row);
        });

        // Full table
        sortedPortfolio.forEach((item) => {
          const row = createPortfolioTableRow(item);
          tableBodyAll.appendChild(row.cloneNode(true));
        });
      }

      function createPortfolioTableRow(item) {
        const row = document.createElement("tr");

        const categoryNames = {
          web: "Web Design",
          development: "Web Development",
          wordpress: "WordPress",
          software: "Software",
        };

        const statusClass = item.published ? "published" : "draft";
        const statusText = item.published ? "Published" : "Draft";

        row.innerHTML = `
                <td>${item.title}</td>
                <td>${categoryNames[item.category] || item.category}</td>
                <td><span class="status ${statusClass}">${statusText}</span></td>
                <td>${formatDate(item.date)}</td>
                <td class="actions">
                    <button class="btn btn-sm btn-primary" onclick="editPortfolioItem(${item.id})">
                        <i class="fas fa-edit"></i> Edit
                    </button>
                    <button class="btn btn-sm btn-danger" onclick="deletePortfolioItem(${item.id})">
                        <i class="fas fa-trash"></i> Delete
                    </button>
                </td>
            `;

        return row;
      }

      function filterPortfolioTable(category) {
        const tableBodyAll = document.getElementById("portfolioTableAll");
        tableBodyAll.innerHTML = "";

        let filteredItems;

        if (category === "all") {
          filteredItems = currentData.portfolio;
        } else {
          filteredItems = currentData.portfolio.filter(
            (item) => item.category === category,
          );
        }

        // Sort by date (newest first)
        filteredItems.sort((a, b) => new Date(b.date) - new Date(a.date));

        filteredItems.forEach((item) => {
          const row = createPortfolioTableRow(item);
          tableBodyAll.appendChild(row);
        });
      }

      function loadSkillsTable() {
        const tableBody = document.getElementById("skillsTable");
        tableBody.innerHTML = "";

        currentData.skills.forEach((skill) => {
          const row = document.createElement("tr");

          const categoryNames = {
            frontend: "Frontend Development",
            backend: "Backend & CMS",
            tools: "Tools & Technologies",
          };

          row.innerHTML = `
                    <td>${skill.name}</td>
                    <td>${categoryNames[skill.category] || skill.category}</td>
                    <td>
                        <div style="display: flex; align-items: center; gap: 10px;">
                            <div style="flex: 1; height: 8px; background-color: #e9ecef; border-radius: 4px;">
                                <div style="width: ${skill.proficiency}%; height: 100%; background-color: var(--primary); border-radius: 4px;"></div>
                            </div>
                            <span>${skill.proficiency}%</span>
                        </div>
                    </td>
                    <td><i class="${skill.icon}"></i></td>
                    <td class="actions">
                        <button class="btn btn-sm btn-primary" onclick="editSkill(${skill.id})">
                            <i class="fas fa-edit"></i> Edit
                        </button>
                        <button class="btn btn-sm btn-danger" onclick="deleteSkill(${skill.id})">
                            <i class="fas fa-trash"></i> Delete
                        </button>
                    </td>
                `;

          tableBody.appendChild(row);
        });
      }

      function loadServicesTable() {
        const tableBody = document.getElementById("servicesTable");
        tableBody.innerHTML = "";

        currentData.services.forEach((service) => {
          const row = document.createElement("tr");

          const featuresHtml = service.features
            .map(
              (feature) =>
                `<span style="display: inline-block; background-color: #e9ecef; padding: 4px 8px; border-radius: 4px; margin: 2px; font-size: 0.85rem;">${feature}</span>`,
            )
            .join("");

          row.innerHTML = `
                    <td>${service.title}</td>
                    <td>${service.description.substring(0, 60)}...</td>
                    <td><i class="${service.icon}"></i></td>
                    <td>${featuresHtml}</td>
                    <td class="actions">
                        <button class="btn btn-sm btn-primary" onclick="editService(${service.id})">
                            <i class="fas fa-edit"></i> Edit
                        </button>
                        <button class="btn btn-sm btn-danger" onclick="deleteService(${service.id})">
                            <i class="fas fa-trash"></i> Delete
                        </button>
                    </td>
                `;

          tableBody.appendChild(row);
        });
      }

      function loadMessagesTable() {
        const tableBody = document.getElementById("messagesTable");
        const tableBodyFull = document.getElementById("messagesTableFull");
        tableBody.innerHTML = "";
        tableBodyFull.innerHTML = "";

        // Sort by date (newest first)
        const sortedMessages = [...currentData.messages].sort(
          (a, b) => new Date(b.date) - new Date(a.date),
        );

        // Get first 5 items for dashboard
        const dashboardMessages = sortedMessages.slice(0, 5);

        // Dashboard table
        dashboardMessages.forEach((message) => {
          const row = createMessageTableRow(message);
          tableBody.appendChild(row);
        });

        // Full table
        sortedMessages.forEach((message) => {
          const row = createMessageTableRow(message, true);
          tableBodyFull.appendChild(row);
        });
      }

      function createMessageTableRow(message, full = false) {
        const row = document.createElement("tr");

        const statusClass = message.read ? "" : "unread";
        const statusText = message.read ? "Read" : "Unread";
        const messagePreview =
          message.message.length > 50
            ? message.message.substring(0, 50) + "..."
            : message.message;

        if (full) {
          row.innerHTML = `
                    <td>${message.name}</td>
                    <td>${message.email}</td>
                    <td>${message.subject}</td>
                    <td>${messagePreview}</td>
                    <td>${formatDate(message.date)}</td>
                    <td><span class="status ${message.read ? "published" : "draft"}">${statusText}</span></td>
                    <td class="actions">
                        <button class="btn btn-sm btn-primary" onclick="viewMessage(${message.id})">
                            <i class="fas fa-eye"></i> View
                        </button>
                        <button class="btn btn-sm btn-success" onclick="markMessageRead(${message.id})">
                            <i class="fas fa-check"></i> Mark Read
                        </button>
                        <button class="btn btn-sm btn-danger" onclick="deleteMessage(${message.id})">
                            <i class="fas fa-trash"></i> Delete
                        </button>
                    </td>
                `;
        } else {
          row.innerHTML = `
                    <td>${message.name}</td>
                    <td>${message.email}</td>
                    <td>${message.subject}</td>
                    <td>${formatDate(message.date)}</td>
                    <td><span class="status ${message.read ? "published" : "draft"}">${statusText}</span></td>
                    <td class="actions">
                        <button class="btn btn-sm btn-primary" onclick="viewMessage(${message.id})">
                            <i class="fas fa-eye"></i> View
                        </button>
                    </td>
                `;
        }

        if (!message.read) {
          row.style.fontWeight = "600";
        }

        return row;
      }

      function updateDashboardCounts() {
        document.getElementById("portfolioCount").textContent =
          currentData.portfolio.length;
        document.getElementById("skillsCount").textContent =
          currentData.skills.length;
        document.getElementById("servicesCount").textContent =
          currentData.services.length;
        document.getElementById("messagesCount").textContent =
          currentData.messages.filter((m) => !m.read).length;
      }

      function openPortfolioModal(item = null) {
        editingItem = item;

        if (item) {
          document.getElementById("modalPortfolioTitle").textContent =
            "Edit Portfolio Item";
          document.getElementById("portfolioId").value = item.id;
          document.getElementById("portfolioTitle").value = item.title;
          document.getElementById("portfolioCategory").value = item.category;
          document.getElementById("portfolioDescription").value =
            item.description;
          document.getElementById("portfolioImage").value = item.image;
          document.getElementById("portfolioLink").value = item.link;
          document.getElementById("portfolioPublished").checked =
            item.published;
        } else {
          document.getElementById("modalPortfolioTitle").textContent =
            "Add New Portfolio Item";
          document.getElementById("portfolioForm").reset();
          document.getElementById("portfolioId").value = "";
          document.getElementById("portfolioPublished").checked = true;
        }

        portfolioModal.style.display = "flex";
      }

      function closePortfolioModal() {
        portfolioModal.style.display = "none";
        editingItem = null;
      }

      function openSkillModal(skill = null) {
        editingItem = skill;

        if (skill) {
          document.getElementById("modalSkillTitle").textContent = "Edit Skill";
          document.getElementById("skillId").value = skill.id;
          document.getElementById("skillName").value = skill.name;
          document.getElementById("skillCategory").value = skill.category;
          document.getElementById("skillProficiency").value = skill.proficiency;
          document.getElementById("proficiencyValue").textContent =
            skill.proficiency + "%";
          document.getElementById("skillIcon").value = skill.icon;
        } else {
          document.getElementById("modalSkillTitle").textContent =
            "Add New Skill";
          document.getElementById("skillForm").reset();
          document.getElementById("skillId").value = "";
          document.getElementById("skillProficiency").value = 80;
          document.getElementById("proficiencyValue").textContent = "80%";
          document.getElementById("skillIcon").value = "fas fa-code";
        }

        skillModal.style.display = "flex";
      }

      function closeSkillModal() {
        skillModal.style.display = "none";
        editingItem = null;
      }

      function openServiceModal(service = null) {
        editingItem = service;

        if (service) {
          document.getElementById("modalServiceTitle").textContent =
            "Edit Service";
          document.getElementById("serviceId").value = service.id;
          document.getElementById("serviceTitle").value = service.title;
          document.getElementById("serviceDescription").value =
            service.description;
          document.getElementById("serviceIcon").value = service.icon;
          document.getElementById("serviceFeatures").value =
            service.features.join(", ");
        } else {
          document.getElementById("modalServiceTitle").textContent =
            "Add New Service";
          document.getElementById("serviceForm").reset();
          document.getElementById("serviceId").value = "";
          document.getElementById("serviceIcon").value = "fas fa-code";
        }

        serviceModal.style.display = "flex";
      }

      function closeServiceModal() {
        serviceModal.style.display = "none";
        editingItem = null;
      }

      function savePortfolioItem() {
        const id = document.getElementById("portfolioId").value;
        const title = document.getElementById("portfolioTitle").value;
        const category = document.getElementById("portfolioCategory").value;
        const description = document.getElementById(
          "portfolioDescription",
        ).value;
        const image = document.getElementById("portfolioImage").value;
        const link = document.getElementById("portfolioLink").value;
        const published = document.getElementById("portfolioPublished").checked;

        if (id) {
          // Update existing item
          const index = currentData.portfolio.findIndex(
            (item) => item.id == id,
          );
          if (index !== -1) {
            currentData.portfolio[index] = {
              id: parseInt(id),
              title,
              category,
              description,
              image,
              link,
              published,
              date: currentData.portfolio[index].date,
            };
          }
        } else {
          // Add new item
          const newId =
            currentData.portfolio.length > 0
              ? Math.max(...currentData.portfolio.map((item) => item.id)) + 1
              : 1;

          currentData.portfolio.push({
            id: newId,
            title,
            category,
            description,
            image,
            link,
            published,
            date: new Date().toISOString().split("T")[0],
          });
        }

        // Update UI
        loadPortfolioTable();
        filterPortfolioTable("all");
        updateDashboardCounts();
        closePortfolioModal();

        alert("Portfolio item saved successfully!");
      }

      function saveSkill() {
        const id = document.getElementById("skillId").value;
        const name = document.getElementById("skillName").value;
        const category = document.getElementById("skillCategory").value;
        const proficiency = parseInt(
          document.getElementById("skillProficiency").value,
        );
        const icon = document.getElementById("skillIcon").value;

        if (id) {
          // Update existing skill
          const index = currentData.skills.findIndex((skill) => skill.id == id);
          if (index !== -1) {
            currentData.skills[index] = {
              id: parseInt(id),
              name,
              category,
              proficiency,
              icon,
            };
          }
        } else {
          // Add new skill
          const newId =
            currentData.skills.length > 0
              ? Math.max(...currentData.skills.map((skill) => skill.id)) + 1
              : 1;

          currentData.skills.push({
            id: newId,
            name,
            category,
            proficiency,
            icon,
          });
        }

        // Update UI
        loadSkillsTable();
        updateDashboardCounts();
        closeSkillModal();

        alert("Skill saved successfully!");
      }

      function saveService() {
        const id = document.getElementById("serviceId").value;
        const title = document.getElementById("serviceTitle").value;
        const description = document.getElementById("serviceDescription").value;
        const icon = document.getElementById("serviceIcon").value;
        const featuresText = document.getElementById("serviceFeatures").value;
        const features = featuresText
          .split(",")
          .map((feature) => feature.trim())
          .filter((feature) => feature);

        if (id) {
          // Update existing service
          const index = currentData.services.findIndex(
            (service) => service.id == id,
          );
          if (index !== -1) {
            currentData.services[index] = {
              id: parseInt(id),
              title,
              description,
              icon,
              features,
            };
          }
        } else {
          // Add new service
          const newId =
            currentData.services.length > 0
              ? Math.max(...currentData.services.map((service) => service.id)) +
                1
              : 1;

          currentData.services.push({
            id: newId,
            title,
            description,
            icon,
            features,
          });
        }

        // Update UI
        loadServicesTable();
        updateDashboardCounts();
        closeServiceModal();

        alert("Service saved successfully!");
      }

      // CRUD operations for portfolio items
      function editPortfolioItem(id) {
        const item = currentData.portfolio.find((item) => item.id === id);
        if (item) {
          openPortfolioModal(item);
        }
      }

      function deletePortfolioItem(id) {
        if (confirm("Are you sure you want to delete this portfolio item?")) {
          currentData.portfolio = currentData.portfolio.filter(
            (item) => item.id !== id,
          );
          loadPortfolioTable();
          filterPortfolioTable("all");
          updateDashboardCounts();
          alert("Portfolio item deleted successfully!");
        }
      }

      // CRUD operations for skills
      function editSkill(id) {
        const skill = currentData.skills.find((skill) => skill.id === id);
        if (skill) {
          openSkillModal(skill);
        }
      }

      function deleteSkill(id) {
        if (confirm("Are you sure you want to delete this skill?")) {
          currentData.skills = currentData.skills.filter(
            (skill) => skill.id !== id,
          );
          loadSkillsTable();
          updateDashboardCounts();
          alert("Skill deleted successfully!");
        }
      }

      // CRUD operations for services
      function editService(id) {
        const service = currentData.services.find(
          (service) => service.id === id,
        );
        if (service) {
          openServiceModal(service);
        }
      }

      function deleteService(id) {
        if (confirm("Are you sure you want to delete this service?")) {
          currentData.services = currentData.services.filter(
            (service) => service.id !== id,
          );
          loadServicesTable();
          updateDashboardCounts();
          alert("Service deleted successfully!");
        }
      }

      // Message operations
      function viewMessage(id) {
        const message = currentData.messages.find(
          (message) => message.id === id,
        );
        if (message) {
          alert(
            `Message from ${message.name} (${message.email})\n\nSubject: ${message.subject}\n\n${message.message}`,
          );

          // Mark as read
          if (!message.read) {
            message.read = true;
            loadMessagesTable();
            updateDashboardCounts();
          }
        }
      }

      function markMessageRead(id) {
        const message = currentData.messages.find(
          (message) => message.id === id,
        );
        if (message) {
          message.read = true;
          loadMessagesTable();
          updateDashboardCounts();
          alert("Message marked as read!");
        }
      }

      function deleteMessage(id) {
        if (confirm("Are you sure you want to delete this message?")) {
          currentData.messages = currentData.messages.filter(
            (message) => message.id !== id,
          );
          loadMessagesTable();
          updateDashboardCounts();
          alert("Message deleted successfully!");
        }
      }

      // Utility functions
      function formatDate(dateString) {
        const options = { year: "numeric", month: "short", day: "numeric" };
        return new Date(dateString).toLocaleDateString("en-US", options);
      }
    </script>
  </body>
</html>
